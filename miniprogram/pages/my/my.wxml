<!--pages/my/my.wxml-->
<view class="container">
    <view class="top">
        <view class="box1"></view>
        <view class="box2"></view>
    </view>

    <view class="user-wrap">
        <view class="userInfo">
            <!-- <button open-type="getUserInfo" bindgetuserinfo="onGetUserInfo" class="avatar" style="background-image: url({{avatarUrl}})" size="default" ></button> -->
            <open-data class="avatar" type="userAvatarUrl"></open-data>
            <open-data class="nickName" type="userNickName"></open-data>
            <view class="member {{ user.isPro ? 'pro' : ''}}">
                <view wx:if="{{user.isPro}}">会员用户</view>
                <view wx:else>暂未加入会员</view>
            </view>
        </view>

        <view class="progress-wrap" wx:if="{{ !user.isPro }}">
            <cell custom-class="progress-cell">
                <van-progress slot="bd" show-pivot="{{false}}" color="#f9ce0d" percentage="{{ remainInviteCount * 100 / CAN_AWARD_MIN_INVITE }}" />
                <view slot="ft" class="progress-ft">{{ remainInviteCount }}/{{ CAN_AWARD_MIN_INVITE }}</view>
            </cell>
            <view class="progress-note">[限时] 邀请3位新用户进入即可获赠7天会员, 可累加噢!</view>
            <view style="margin-top: 38rpx;"></view>

            <view style="display: flex;">
                <view style="flex: 1">
                    <van-button round size="small" color="#f9ce0d" open-type="share" custom-style="color: #4a4a4a; font-weight: bold;" block>立即分享给好友</van-button>            
                </view>
                <view style="width: 20rpx;"></view>
                <view wx:if="{{systemInfo.platform === 'android'}}" style="flex: 1;">
                    <van-button round size="small" bind:click="openMemberBtn" custom-style="font-weight: bold; " plain color="#f9ce0d"  block>直接开通会员</van-button>
                </view>
            </view>
        </view>
    </view>

    <view style="height: 220rpx;"></view>
    <!-- <view class="activity">
        <view class="activity-note" >全力抗疫，在家充电，这个2月所有用户均可获赠1一个月会员</view>
        <view class="get-member-btn" bindtap="getActivityMember">领取专属会员(仅2月可领)</view>
    </view> -->


    <view class="operators">
        <van-cell-group>
            <van-cell size="large" link-type="navigateTo" url="/pages/message/message" is-link>
                <cell slot="title" num="{{ newMessageNum }}">
                    <view slot="bd">我的消息</view>
                </cell>
            </van-cell>
            <van-cell title="会员兑换码" size="large" link-type="navigateTo" url="/pages/exchange/exchange" is-link  />
            <van-cell title="复制 ID 号" size="large" bind:click="copyOpenid"/>
        </van-cell-group>
    </view>

    <view class="operators">
        <van-cell-group>
            <button open-type="contact" style="text-align: left; padding: 0; border: 0;">
                <van-cell title="客服/建议" size="large" is-link></van-cell>
            </button>
        </van-cell-group>
    </view>

    <!-- <view class="freeMember" open-type="contact" bindtap="freeMemberBtn">
        <image class="img" src="/assets/imgs/freeMember.png" ></image>
    </view> -->

    <van-dialog id="van-dialog" use-slot>
        <view>
            <image mode="widthFix" src="/assets/imgs/kefu-bg.png" />
            <view style="color: #4a4a4a; padding: 20rpx 32rpx;line-height: 1.8;">
                <view style="font-weight: bold; line-height: 2.3;">免费获取方式：</view>
                <view>1.关注「数听英语」公众号，获得会员</view>
                <view>2.点击“查看客服”，添加数听英语客服微信</view>
            </view>
            
        </view>
    </van-dialog>
</view>
