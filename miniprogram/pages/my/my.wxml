<!--pages/my/my.wxml-->
<view class="container">
    <view class="top-wrap">
        <cell class="user-info">
            <view slot="hd">
                <image wx:if="{{ user.avatar }}" class="avatar" mode="widthFix" src="{{ user.avatar }}"></image>
                <image wx:elif="{{ user.isPro }}" class="avatar" mode="widthFix" src="/assets/imgs/user-unlogin.png"></image>
                <open-data wx:else class="avatar" type="userAvatarUrl"></open-data>
            </view>
            <view slot="bd">
                <view wx:if="{{ user.nickName }}" class="nickName">{{ user.nickName }}</view>
                <button wx:elif="{{ user.isPro }}" class="getUserInfoBtn" open-type="getUserInfo" bindgetuserinfo="onGetUserInfo">点击微信登录</button>
                <open-data wx:else class="nickName" type="userNickName"></open-data>
                <view wx:if="{{ user.isPro }}" class="ft_14 pro-note">Pro会员 {{ user.memberType === 3 ? '永久版' : '' + proEndDateStr + '到期' }}</view>
            </view>
        </cell>
        <!-- 没有付过费 -->
        <view wx:if="{{ !user.isPaid }}" class="cl_fff ft_12 mt_16 mb_10 text-center">
            <view class="member-btn" bindtap="memberBtn">查看会员计划</view>
        </view>
        <!-- 付过费 -->
        <block wx:else>
            <view wx:if="{{ !user.isBuyOver24Hour && user.memberType !== 3 }}" class="cl_fff ft_12 mt_16 mb_10 text-center">
                <view class="activity-btn" bindtap="memberDouble">获得会员翻倍机会</view>
            </view>
            <view wx:else class="h_15"></view>
        </block>

    </view>

    <view class="operators mt_0">
        <van-cell-group>
            <van-cell title="版本预告" icon="down" size="large" link-type="navigateTo" url="/pages/version/version" is-link  />
            <van-cell wx:if="{{ user.memberType !== 3 }}" icon="point-gift-o" title="免费Vip" value="可领7天" size="large" link-type="navigateTo" url="/pages/activity/activity" is-link  />
            <!-- <van-cell size="large" icon="chat-o" link-type="navigateTo" url="/pages/message/message" is-link>
                <cell slot="title" num="{{ newMessageNum }}">
                    <view slot="bd">我的消息</view>
                </cell>
            </van-cell> -->
            <van-cell icon="gem-o" title="会员兑换码" size="large" link-type="navigateTo" url="/pages/exchange/exchange" is-link  />
        </van-cell-group>
    </view>

    <view class="operators">
        <van-cell-group>
            <button class="contact-btn" open-type="contact" style="">
                <van-cell icon="smile-o" title="人工客服/建议" size="large" is-link></van-cell>
            </button>

            <van-cell icon="idcard" title="复制 ID 号" size="large" bind:click="copyOpenid"/>
        </van-cell-group>
    </view>

    <van-dialog id="van-dialog"></van-dialog>
    
    <!-- 在页面内添加对应的节点 -->
    <van-notify id="van-notify" />

</view>
